const t=class{constructor(e={}){this._getKeyCode=t=>{let e;return void 0!==t.key?e=t.key:void 0!==t.keyCode&&(e=t.keyCode),e},this.options={...t.defaultOptions,...e},this.elements=this._toElementArray(this.options.triggerElement),this.modals=[],this.activeModal=!1,this.attachHandler(),this.attachCloseHandler(),this.attachKeydown()}attachHandler(){var t;if(null==(t=this.elements)||t.forEach((t=>{const e=t.getAttribute("href");if(!e||"#"===e)return console.error("Please provide a valid ID or class");const o=document.querySelector(e);if(!o)return console.error(`Could not find find element with '${e}'`);null===o.getAttribute("aria-hidden")&&o.setAttribute("aria-hidden","true"),this.modals.includes(o)||this.modals.push(o),t.addEventListener("click",(t=>this.showModal(o,t)))})),0===this.modals.length)throw new Error("Could not find any modal")}attachCloseHandler(){this.modals.forEach((t=>{t.addEventListener("click",(e=>{null!==e.target&&void 0!==this.options.closeClass&&e.target.classList.contains(this.options.closeClass)&&this.closeModal(t,e)}))}))}attachKeydown(){document.addEventListener("keydown",(t=>{const e=this._getKeyCode(t);(this.activeModal&&"Escape"===e||27===e)&&this.modal&&this.closeModal(this.modal,t)}))}showModal(t,e){return this.modal=t||document.querySelector(t),this.modal&&this.options.openClass?(this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.options.openClass),this.activeModal=!0):this.modal&&void 0===this.options.openClass&&(this.modal.setAttribute("aria-hidden","true"),this.modal.classList.remove("is-open"),this.activeModal=!1),this.options.preventDefault&&(null==e||e.preventDefault()),this.options.onShow&&void 0!==this.modal&&null!==this.modal&&(void 0!==(null==e?void 0:e.target)&&null!==(null==e?void 0:e.target)?this.options.onShow(this.modal,null==e?void 0:e.target,e):this.options.onShow(this.modal)),this}closeModal(t,e){var o,s;if(this.modal=t||document.querySelector(t),this.options.openClass){const t=this.options.openClass;null==(o=this.modal)||o.setAttribute("aria-hidden","true");const e=()=>{var o,s;null==(o=this.modal)||o.classList.remove(t),this.activeModal=!1,null==(s=this.modal)||s.removeEventListener("animationend",e,!1)};null==(s=this.modal)||s.addEventListener("animationend",e,!1)}return this.options.preventDefault&&(null==e||e.preventDefault()),this.options.onClose&&void 0!==this.modal&&null!==this.modal&&(void 0!==(null==e?void 0:e.target)&&null!==(null==e?void 0:e.target)?this.options.onClose(this.modal,null==e?void 0:e.target,e):this.options.onClose(this.modal)),this}_toElementArray(t){if("string"==typeof t)return[...document.querySelectorAll(t)];if(Array.isArray(t))return t;if(t&&void 0!==t.length)return Array.prototype.slice.call(t);if(t)return[t];throw new Error("value cannot be undefined or null, expected string, HTMLElement or array")}};let e=t;e.defaultOptions={triggerElement:".ts-modal-toggle",openClass:"is-open",closeClass:"ts-close",preventDefault:!0,onShow:()=>{},onClose:()=>{}},window.TsModal=e;export default e;
//# sourceMappingURL=ts-modal.es.js.map
