const t=class{constructor(e={}){this._getKeyCode=t=>{let e;return void 0!==t.key?e=t.key:void 0!==t.keyCode&&(e=t.keyCode),e},this.options={...t.defaultOptions,...e},this.elements=this._toElementArray(this.options.triggerElement),this.modal=this._toElement(this.options.targetModal),this.activeModal=!1,this.attachHandler(),this.attachCloseHandler(),this.attachKeydown()}attachHandler(){var t;null==(t=this.elements)||t.forEach((t=>{t.addEventListener("click",(t=>this.showModal(t)))}))}attachCloseHandler(){var t;null==(t=this.modal)||t.addEventListener("click",(t=>{null!==t.target&&void 0!==this.options.closeClass&&t.target.classList.contains(this.options.closeClass)&&this.closeModal(t)}))}attachKeydown(){document.addEventListener("keydown",(t=>{const e=this._getKeyCode(t);this.activeModal&&"Escape"===e&&this.closeModal(t)}))}showModal(t){var e,o;return this.options.openClass&&(null==(e=this.modal)||e.setAttribute("aria-hidden","false"),null==(o=this.modal)||o.classList.add(this.options.openClass),this.activeModal=!0),this.options.preventDefault&&(null==t||t.preventDefault()),this.options.onShow&&void 0!==this.modal&&null!==this.modal&&(void 0!==(null==t?void 0:t.target)&&null!==(null==t?void 0:t.target)?this.options.onShow(this.modal,null==t?void 0:t.target,t):this.options.onShow(this.modal)),this}closeModal(t){var e,o;if(this.options.openClass){const t=this.options.openClass;null==(e=this.modal)||e.setAttribute("aria-hidden","true");const l=()=>{var e,o;null==(e=this.modal)||e.classList.remove(t),this.activeModal=!1,null==(o=this.modal)||o.removeEventListener("animationend",l,!1)};null==(o=this.modal)||o.addEventListener("animationend",l,!1)}return this.options.preventDefault&&(null==t||t.preventDefault()),this.options.onClose&&void 0!==this.modal&&null!==this.modal&&(void 0!==(null==t?void 0:t.target)&&null!==(null==t?void 0:t.target)?this.options.onClose(this.modal,null==t?void 0:t.target,t):this.options.onClose(this.modal)),this}_toElementArray(t){if("string"==typeof t)return[...document.querySelectorAll(t)];if(Array.isArray(t))return t;if(t&&void 0!==t.length)return Array.prototype.slice.call(t);if(t)return[t];throw new Error("value cannot be undefined or null, expected string, HTMLElement or array")}_toElement(t){if("string"==typeof t)return document.querySelector(t);if(t)return t;if(void 0===t)throw new Error("value cannot be undefined");throw new Error("value cannot be null")}};let e=t;e.defaultOptions={triggerElement:".ts-modal-toggle",targetModal:".modal",openClass:"is-open",closeClass:"ts-close",preventDefault:!0,onShow:()=>{},onClose:()=>{}};export default e;
//# sourceMappingURL=ts-modal.es.js.map
